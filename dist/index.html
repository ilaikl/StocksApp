<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Stocks App</title>

  <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="stylemain.css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
 

<body>
  <div id="main-container">


    <!-- <----------------------------------------------------------------------------->
    <div class="header-container">
      <a onclick='rendrerMain()' id="logo"><img src="../img/logo.png"></a>
      <div id="mySidepanel" class="sidepanel">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
        <a onclick='rendrerMain()'>info1</a>
        <a onclick='rendrerMain()'>info2</a>
        <a onclick='rendrerMain()'>info3</a>
        <a onclick='rendrerMain()'>info4</a>
      </div>
      <button class="openbtn" onclick="openNav()">☰</button>
    </div>
    <script>
      function openNav() {
        document.getElementById("mySidepanel").style.width = "250px";
      }
      function closeNav() {
        document.getElementById("mySidepanel").style.width = "0";
      }
    </script>

    <!-- <----------------------------------------------------------------------------->
    <div id="currentData">
    </div>


    <div id="dataList">
    </div>


    <!-- Handelbars -->
    <script id="main-menu-template" type="text/x-handlebars-template">
    <div id="userInput">
      <input type="text" id="stock-input" placeholder="Search Stock">
      <button id="getStocksBtn" onclick=getStocksPage()><i class="fa fa-search"></i></button>
      <input type="text" id="user-input" placeholder="Search User">
      <button id="getUserBtn" onclick=getUsersPage()><i class="fa fa-search"></i></button>
    </div>
  </script>


    <script id="user-data-template" type="text/x-handlebars-template">
    <div class='userDataBox'><p class="userData">  {{firstName}} {{lastName}}, rank: {{rank}}  </p></div>
  </script>

    <script id="stock-data-template" type="text/x-handlebars-template">

    <div class='stockDataBox'><p class='stockData'>  {{symbol}} </p></div>

  <canvas id="stockChart"></canvas>
</div>
      <script>

function drawLineChart() {

// Add a helper to format timestamp data
Date.prototype.formatMMDDYYYY = function() {
    return (this.getMonth() + 1) +
    "/" +  this.getDate() +
    "/" +  this.getFullYear();
}

var jsonData = $.ajax({
  url: 'http://d.microbuilder.io:8080/test/temp',
  dataType: 'json',
}).done(function (results) {

  // Split timestamp and data into separate arrays
  var labels = [], data=[];
  results["packets"].forEach(function(packet) {
    labels.push(new Date(packet.timestamp).formatMMDDYYYY());
    data.push(parseFloat(packet.payloadString));
  });

  // Create the chart.js data structure using 'labels' and 'data'
  var tempData = {
    labels : labels,
    datasets : [{
        fillColor             : "rgba(151,187,205,0.2)",
        strokeColor           : "rgba(151,187,205,1)",
        pointColor            : "rgba(151,187,205,1)",
        pointStrokeColor      : "#fff",
        pointHighlightFill    : "#fff",
        pointHighlightStroke  : "rgba(151,187,205,1)",
        data                  : data
    }]
  };

        let stockChart = document.getElementById('stockChart').getContext('2d');
        let currentStockChart = new Chart(stockChart, {})

        let currentStockChartnew = new Chart(stockChart).Line(history)
        
      
      </script>

    <div class='stockDataBox'><p class='stockData'>  {{symbol}} </p>
    
      <button id="createRecBtn" onclick=createRecommendation()>Make Forcast</button>
      <button id="investBtnInStock" onclick=invest()>Invest</button>
    </div>
  </script>
  
  <script id="rec-data-template" type="text/x-handlebars-template">

    <div class='recDataBox'><p class='recData'>  {{stockSymbol}} Current Data:...add</p> </div>
  </script>


    <script id="stock-list-template" type="text/x-handlebars-template">


  <script id="recommendation-list-template" type="text/x-handlebars-template">
    {{#each recommendation}}
    <div class='recommendationListBox' data-id="{{this._id}}">Recommendation: <p class='stockListSymbol'> {{this.stockSymbol}} </p></div>
    {{/each}}
  </script>
    
  <script id="stock-list-template" type="text/x-handlebars-template">
    {{#each stock}}
    <div class='stockListBox'><p class='stockListSymbol'>  {{this.symbol}} </p></div>
    {{/each}}
  </script>
  </div>



  <script id="rec-page-bottom-template" type="text/x-handlebars-template">

    <div class='recBottomBox'>
      
      <button id="followUserBtnInRec" onclick=followUser()>Follow User</button>

      <button id="investBtnInRec" onclick=invest()>Invest</button>
    </div>
  </script>

  <script src="handlebars/dist/handlebars.js"></script>
  <script src="./jquery/dist/jquery.js"></script>
  <script src="render.js"></script>
  <script src="logic.js"></script>
  <script src="main.js"></script>
</body>

</html>